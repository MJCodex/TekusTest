<form [formGroup]="form" (submit)="save()">
  <mat-card-title>{{'subscribers-form.title'|transloco}}</mat-card-title>
  <p>
    <mat-card-subtitle
      *ngIf="!data.subscriber"
    >{{'subscribers-form.new'|transloco}}</mat-card-subtitle>
    <mat-card-subtitle
      *ngIf="data.subscriber"
    >{{'subscribers-form.edit'|transloco}}</mat-card-subtitle>
  </p>
  <p>
    <mat-form-field appearance="standard">
      <mat-label>{{'subscribers-form.name'|transloco}}</mat-label>
      <input matInput required formControlName="Name">
      <mat-error>
        <app-errors-handler [control]="form.get('Name')"></app-errors-handler>
      </mat-error>
    </mat-form-field>
    <mat-form-field appearance="standard" class="form-input">
      <mat-label>{{'subscribers-form.email'|transloco}}</mat-label>
      <input matInput required formControlName="Email" type="email" name="email">
      <mat-error>
        <app-errors-handler [control]="form.get('Email')"></app-errors-handler>
      </mat-error>
    </mat-form-field>
  </p>
  <p>
    <mat-form-field appearance="standard">
      <mat-label>{{'subscribers-form.country-name'|transloco}}</mat-label>
      <input type="text"
             autocomplete="potato"
             matInput
             formControlName="searchCountry"
             (ngModelChange)="getCountries()"
             [matAutocomplete]="customAuto">
      <mat-autocomplete #customAuto="matAutocomplete" [displayWith]="displayName.bind(this)"
                        (optionSelected)="selectionChange($event)">
        <ng-container>
          <mat-option *ngFor="let option of countries" [value]="option">
            {{ displayName(option) }}
          </mat-option>
        </ng-container>
      </mat-autocomplete>
      <mat-error>
        <app-errors-handler [control]="form.get('searchCountry')"></app-errors-handler>
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="standard" class="form-input">
      <mat-label>{{'subscribers-form.country-code'|transloco}}</mat-label>
      <input matInput required formControlName="CountryCode" readonly>
      <mat-error>
        <app-errors-handler [control]="form.get('CountryCode')"></app-errors-handler>
      </mat-error>
    </mat-form-field>
  </p>
  <p>
    <mat-form-field appearance="standard">
      <mat-label>{{'subscribers-form.phone-code'|transloco}}</mat-label>
      <input matInput required formControlName="PhoneCode" readonly>
      <mat-error>
        <app-errors-handler [control]="form.get('PhoneCode')"></app-errors-handler>
      </mat-error>
    </mat-form-field>
    <mat-form-field appearance="standard" class="form-input">
      <mat-label>{{'subscribers-form.phone-number'|transloco}}</mat-label>
      <input matInput required formControlName="PhoneNumber">
      <mat-error>
        <app-errors-handler [control]="form.get('PhoneNumber')" [maxErrors]="1"></app-errors-handler>
      </mat-error>
    </mat-form-field>
  </p>
  <p>
    <mat-form-field appearance="standard">
      <mat-label>{{'subscribers-form.job-title'|transloco}}</mat-label>
      <input matInput required formControlName="JobTitle">
      <mat-error>
        <app-errors-handler [control]="form.get('JobTitle')"></app-errors-handler>
      </mat-error>
    </mat-form-field>
    <mat-form-field appearance="standard" class="form-input">
      <mat-label>{{'subscribers-form.area'|transloco}}</mat-label>
      <input matInput required formControlName="Area">
      <mat-error>
        <app-errors-handler [control]="form.get('Area')"></app-errors-handler>
      </mat-error>
    </mat-form-field>
  </p>
  <p>{{'subscribers-form.topics'|transloco}}</p>
  <p>
    <ng-container *ngFor="let checkbox of topics; let i = index" formArrayName="Topics">
      <input type="checkbox" [formControlName]="i"/>{{checkbox.name}}
    </ng-container>

  </p>
  <mat-card-actions>
    <div class="save-button">
      <button mat-raised-button color="primary" type="submit">{{'subscribers-form.save'|transloco}}</button>
    </div>
  </mat-card-actions>
</form>
